<!-- Membership Form -->
<div class="my-1 bg-white dark:bg-gray-700 py-2">
  <div  *ngIf="jsonData !== {}">
    
    <!-- Upper Section -->
    <div class="justify-between items-center grid grid-cols-2 md:flex pb-2 dark:border-gray-500 mx-4">

      <!-- Form Title -->
      <h3 class="col-span-2 md:flex text-2xl font-medium text-indigo-600 dark:text-gray-100 items-center justify-between">Membership Form: <span class="hidden font-normal mt-1 lg:flex text-sm text-rose-400 mx-2">(Fields Marked '*' Are Required)</span></h3>

      <div class="col-span-2 md:flex lg:mt-3 items-center justify-between">

        <!-- Desktop Form Switch -->
        <span (click)="quickToggle();" class="inline-flex text-sm text-rose-700 hover:underline mr-8 my-auto cursor-pointer">Click For {{quick_add ? 'Full' : 'Quick'}} Form</span>
      
        <!-- Print Button -->
        <div class="group inline-flex">

          <button type="button" class="inline-flex items-center rounded border border-white bg-indigo-200 group p-2 lg:px-4 mb-1 text-md font-medium shadow-md text-white hover:bg-indigo-300 hover:-translate-y-px transition-all  active:opacity-85 hover:shadow-xs focus:outline-none focus:ring-purple-500 focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-30">
            <svg class="h-6 w-6 mr-1 lg:mr-2 text-indigo-700" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" d="M6.72 13.829c-.24.03-.48.062-.72.096m.72-.096a42.415 42.415 0 0110.56 0m-10.56 0L6.34 18m10.94-4.171c.24.03.48.062.72.096m-.72-.096L17.66 18m0 0l.229 2.523a1.125 1.125 0 01-1.12 1.227H7.231c-.662 0-1.18-.568-1.12-1.227L6.34 18m11.318 0h1.091A2.25 2.25 0 0021 15.75V9.456c0-1.081-.768-2.015-1.837-2.175a48.055 48.055 0 00-1.913-.247M6.34 18H5.25A2.25 2.25 0 013 15.75V9.456c0-1.081.768-2.015 1.837-2.175a48.041 48.041 0 011.913-.247m10.5 0a48.536 48.536 0 00-10.5 0m10.5 0V3.375c0-.621-.504-1.125-1.125-1.125h-8.25c-.621 0-1.125.504-1.125 1.125v3.659M18 10.5h.008v.008H18V10.5zm-3 0h.008v.008H15V10.5z" />
            </svg>
            <span class="font-semibold text-indigo-700">Print Form</span>
            <svg class="h-6 w-6 lg:ml-2 text-indigo-700 group-hover:-rotate-180" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" d="M19.5 8.25l-7.5 7.5-7.5-7.5" />
            </svg>
          </button>
        
          <!-- Print Options-->
          <div class="z-10 absolute hidden group divide-y divide-gray-200 border border-gray-100 divide-none mx-2 origin-top-right right-6 group-hover:block mt-11 w-48 rounded-md shadow-lg pb-1 bg-white ring-1 ring-indigo-200 ring-opacity-5 focus:outline-none" permission="menu" aria-orientation="vertical" aria-labelledby="user-menu-button" tabindex="-1">
        
            <a class="cursor-pointer" (click)="print('a4','portrait')">
              <div class="flex items-center hover:bg-indigo-50 text-gray-500 hover:text-indigo-700">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" fill="CurrentColor" class="w-5 h-5 ml-3 hover:text-indigo-500">
                  <path d="M64 464H96v48H64c-35.3 0-64-28.7-64-64V64C0 28.7 28.7 0 64 0H229.5c17 0 33.3 6.7 45.3 18.7l90.5 90.5c12 12 18.7 28.3 18.7 45.3V288H336V160H256c-17.7 0-32-14.3-32-32V48H64c-8.8 0-16 7.2-16 16V448c0 8 7.2 16 16 16zM176 352h32c30.9 0 56 25.1 56 56s-25.1 56-56 56H192v32c0 8.8-7.2 16-16 16s-16-7.2-16-16V448 368c0-8.8 7.2-16 16-16zm32 80c13.3 0 24-10.7 24-24s-10.7-24-24-24H192v48h16zm96-80h32c26.5 0 48 21.5 48 48v64c0 26.5-21.5 48-48 48H304c-8.8 0-16-7.2-16-16V368c0-8.8 7.2-16 16-16zm32 128c8.8 0 16-7.2 16-16V400c0-8.8-7.2-16-16-16H320v96h16zm80-112c0-8.8 7.2-16 16-16h48c8.8 0 16 7.2 16 16s-7.2 16-16 16H448v32h32c8.8 0 16 7.2 16 16s-7.2 16-16 16H448v48c0 8.8-7.2 16-16 16s-16-7.2-16-16V432 368z" />
                </svg>
                <span class="block px-2 py-2 text-sm" permission="menuitem" tabindex="-1">PDF Portrait (A4)</span>
              </div>
            </a>
        
            <a class="cursor-pointer" (click)="print('a4','portrait')">
              <div class="flex items-center hover:bg-indigo-50 text-gray-500 hover:text-indigo-700">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" fill="CurrentColor" class="w-5 h-5 ml-3 hover:text-indigo-500">
                  <path d="M64 464H96v48H64c-35.3 0-64-28.7-64-64V64C0 28.7 28.7 0 64 0H229.5c17 0 33.3 6.7 45.3 18.7l90.5 90.5c12 12 18.7 28.3 18.7 45.3V288H336V160H256c-17.7 0-32-14.3-32-32V48H64c-8.8 0-16 7.2-16 16V448c0 8 7.2 16 16 16zM176 352h32c30.9 0 56 25.1 56 56s-25.1 56-56 56H192v32c0 8.8-7.2 16-16 16s-16-7.2-16-16V448 368c0-8.8 7.2-16 16-16zm32 80c13.3 0 24-10.7 24-24s-10.7-24-24-24H192v48h16zm96-80h32c26.5 0 48 21.5 48 48v64c0 26.5-21.5 48-48 48H304c-8.8 0-16-7.2-16-16V368c0-8.8 7.2-16 16-16zm32 128c8.8 0 16-7.2 16-16V400c0-8.8-7.2-16-16-16H320v96h16zm80-112c0-8.8 7.2-16 16-16h48c8.8 0 16 7.2 16 16s-7.2 16-16 16H448v32h32c8.8 0 16 7.2 16 16s-7.2 16-16 16H448v48c0 8.8-7.2 16-16 16s-16-7.2-16-16V432 368z" />
                </svg>
                <span class="block px-2 py-2 text-sm" permission="menuitem" tabindex="-1">PDF Landscape (A4)</span>
              </div>
            </a>
        
            <a class="cursor-pointer" (click)="print('a3','portrait')">
              <div class="flex items-center hover:bg-indigo-50 text-gray-500 hover:text-indigo-700">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" fill="CurrentColor" class="w-5 h-5 ml-3 hover:text-indigo-500">
                  <path d="M64 464H96v48H64c-35.3 0-64-28.7-64-64V64C0 28.7 28.7 0 64 0H229.5c17 0 33.3 6.7 45.3 18.7l90.5 90.5c12 12 18.7 28.3 18.7 45.3V288H336V160H256c-17.7 0-32-14.3-32-32V48H64c-8.8 0-16 7.2-16 16V448c0 8 7.2 16 16 16zM176 352h32c30.9 0 56 25.1 56 56s-25.1 56-56 56H192v32c0 8.8-7.2 16-16 16s-16-7.2-16-16V448 368c0-8.8 7.2-16 16-16zm32 80c13.3 0 24-10.7 24-24s-10.7-24-24-24H192v48h16zm96-80h32c26.5 0 48 21.5 48 48v64c0 26.5-21.5 48-48 48H304c-8.8 0-16-7.2-16-16V368c0-8.8 7.2-16 16-16zm32 128c8.8 0 16-7.2 16-16V400c0-8.8-7.2-16-16-16H320v96h16zm80-112c0-8.8 7.2-16 16-16h48c8.8 0 16 7.2 16 16s-7.2 16-16 16H448v32h32c8.8 0 16 7.2 16 16s-7.2 16-16 16H448v48c0 8.8-7.2 16-16 16s-16-7.2-16-16V432 368z" />
                </svg>
                <span class="block px-2 py-2 text-sm" permission="menuitem" tabindex="-1">PDF Portrait (A3)</span>
              </div>
            </a>
        
            <a class="cursor-pointer" (click)="print('a3','landscape')">
              <div class="flex items-center hover:bg-indigo-50 text-gray-500 hover:text-indigo-700">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" fill="CurrentColor" class="w-5 h-5 ml-3 hover:text-indigo-500">
                  <path d="M64 464H96v48H64c-35.3 0-64-28.7-64-64V64C0 28.7 28.7 0 64 0H229.5c17 0 33.3 6.7 45.3 18.7l90.5 90.5c12 12 18.7 28.3 18.7 45.3V288H336V160H256c-17.7 0-32-14.3-32-32V48H64c-8.8 0-16 7.2-16 16V448c0 8 7.2 16 16 16zM176 352h32c30.9 0 56 25.1 56 56s-25.1 56-56 56H192v32c0 8.8-7.2 16-16 16s-16-7.2-16-16V448 368c0-8.8 7.2-16 16-16zm32 80c13.3 0 24-10.7 24-24s-10.7-24-24-24H192v48h16zm96-80h32c26.5 0 48 21.5 48 48v64c0 26.5-21.5 48-48 48H304c-8.8 0-16-7.2-16-16V368c0-8.8 7.2-16 16-16zm32 128c8.8 0 16-7.2 16-16V400c0-8.8-7.2-16-16-16H320v96h16zm80-112c0-8.8 7.2-16 16-16h48c8.8 0 16 7.2 16 16s-7.2 16-16 16H448v32h32c8.8 0 16 7.2 16 16s-7.2 16-16 16H448v48c0 8.8-7.2 16-16 16s-16-7.2-16-16V432 368z" />
                </svg>
                <span class="block px-2 py-2 text-sm" permission="menuitem" tabindex="-1">PDF Landscape (A3)</span>
              </div>
            </a>
        
            <a class="cursor-pointer" (click)="print('csv','')">
              <div class="flex items-center hover:bg-indigo-50 text-gray-500 hover:text-indigo-700">
                <svg xmlns="http://www.w3.org/2000/svg" fill="CurrentColor" class="font-xtrabold w-5 h-5 ml-3 hover:text-indigo-500" viewBox="0 0 512 512">
                  <path d="M0 64C0 28.7 28.7 0 64 0H224V128c0 17.7 14.3 32 32 32H384V304H176c-35.3 0-64 28.7-64 64V512H64c-35.3 0-64-28.7-64-64V64zm384 64H256V0L384 128zM200 352h16c22.1 0 40 17.9 40 40v8c0 8.8-7.2 16-16 16s-16-7.2-16-16v-8c0-4.4-3.6-8-8-8H200c-4.4 0-8 3.6-8 8v80c0 4.4 3.6 8 8 8h16c4.4 0 8-3.6 8-8v-8c0-8.8 7.2-16 16-16s16 7.2 16 16v8c0 22.1-17.9 40-40 40H200c-22.1 0-40-17.9-40-40V392c0-22.1 17.9-40 40-40zm133.1 0H368c8.8 0 16 7.2 16 16s-7.2 16-16 16H333.1c-7.2 0-13.1 5.9-13.1 13.1c0 5.2 3 9.9 7.8 12l37.4 16.6c16.3 7.2 26.8 23.4 26.8 41.2c0 24.9-20.2 45.1-45.1 45.1H304c-8.8 0-16-7.2-16-16s7.2-16 16-16h42.9c7.2 0 13.1-5.9 13.1-13.1c0-5.2-3-9.9-7.8-12l-37.4-16.6c-16.3-7.2-26.8-23.4-26.8-41.2c0-24.9 20.2-45.1 45.1-45.1zm98.9 0c8.8 0 16 7.2 16 16v31.6c0 23 5.5 45.6 16 66c10.5-20.3 16-42.9 16-66V368c0-8.8 7.2-16 16-16s16 7.2 16 16v31.6c0 34.7-10.3 68.7-29.6 97.6l-5.1 7.7c-3 4.5-8 7.1-13.3 7.1s-10.3-2.7-13.3-7.1l-5.1-7.7c-19.3-28.9-29.6-62.9-29.6-97.6V368c0-8.8 7.2-16 16-16z" />
                </svg>
                <span class="block px-2 py-2 text-sm" permission="menuitem" tabindex="-1">CSV</span>
              </div>
            </a>
        
            <a class="cursor-pointer" (click)="print('excel','')">
              <div class="flex items-center hover:bg-indigo-50 text-gray-500 hover:text-indigo-700">
                <svg xmlns="http://www.w3.org/2000/svg" fill="CurrentColor" class="w-5 h-5 ml-3 hover:text-indigo-500"
                  viewBox="0 0 384 512">
                  <path d="M48 448V64c0-8.8 7.2-16 16-16H224v80c0 17.7 14.3 32 32 32h80V448c0 8.8-7.2 16-16 16H64c-8.8 0-16-7.2-16-16zM64 0C28.7 0 0 28.7 0 64V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V154.5c0-17-6.7-33.3-18.7-45.3L274.7 18.7C262.7 6.7 246.5 0 229.5 0H64zm90.9 233.3c-8.1-10.5-23.2-12.3-33.7-4.2s-12.3 23.2-4.2 33.7L161.6 320l-44.5 57.3c-8.1 10.5-6.3 25.5 4.2 33.7s25.5 6.3 33.7-4.2L192 359.1l37.1 47.6c8.1 10.5 23.2 12.3 33.7 4.2s12.3-23.2 4.2-33.7L222.4 320l44.5-57.3c8.1-10.5 6.3-25.5-4.2-33.7s-25.5-6.3-33.7 4.2L192 280.9l-37.1-47.6z" />
                </svg>
                <span class="block px-2 py-2 text-sm" permission="menuitem" tabindex="-1">Excel</span>
              </div>
            </a>
        
            <a class="cursor-pointer" (click)="print('word','')">
              <div class="flex items-center hover:bg-indigo-50 text-gray-500 hover:text-indigo-700">
                <svg xmlns="http://www.w3.org/2000/svg" fill="CurrentColor" class="w-5 h-5 ml-3 hover:text-indigo-500"
                  viewBox="0 0 384 512">
                  <path d="M48 448V64c0-8.8 7.2-16 16-16H224v80c0 17.7 14.3 32 32 32h80V448c0 8.8-7.2 16-16 16H64c-8.8 0-16-7.2-16-16zM64 0C28.7 0 0 28.7 0 64V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V154.5c0-17-6.7-33.3-18.7-45.3L274.7 18.7C262.7 6.7 246.5 0 229.5 0H64zm55 241.1c-3.8-12.7-17.2-19.9-29.9-16.1s-19.9 17.2-16.1 29.9l48 160c3 10.2 12.4 17.1 23 17.1s19.9-7 23-17.1l25-83.4 25 83.4c3 10.2 12.4 17.1 23 17.1s19.9-7 23-17.1l48-160c3.8-12.7-3.4-26.1-16.1-29.9s-26.1 3.4-29.9 16.1l-25 83.4-25-83.4c-3-10.2-12.4-17.1-23-17.1s-19.9 7-23 17.1l-25 83.4-25-83.4z" />
                </svg>
                <span class="block px-2 py-2 text-sm" permission="menuitem" tabindex="-1">WORD</span>
              </div>
            </a>
        
          </div>

        </div>
      
        <!-- Mobile Form Switch -->
        <!-- <div class="lg:hidden flex ml-2">
          <button (click)="quickToggle()" type="button" class="inline-flex items-center rounded-full border border-white bg-indigo-200 group p-2 lg:px-4 mb-1 text-md font-medium shadow-md text-white hover:bg-indigo-300 hover:-translate-y-px transition-all  active:opacity-85 hover:shadow-xs focus:outline-none focus:ring-purple-500 focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-30">
            <svg *ngIf="!quick_add" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="h-6 w-6 text-indigo-700">
              <path stroke-linecap="round" stroke-linejoin="round" d="M9 9V4.5M9 9H4.5M9 9 3.75 3.75M9 15v4.5M9 15H4.5M9 15l-5.25 5.25M15 9h4.5M15 9V4.5M15 9l5.25-5.25M15 15h4.5M15 15v4.5m0-4.5 5.25 5.25" />
            </svg>
            <svg *ngIf="quick_add" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6 text-indigo-700">
              <path stroke-linecap="round" stroke-linejoin="round" d="M3.75 3.75v4.5m0-4.5h4.5m-4.5 0L9 9M3.75 20.25v-4.5m0 4.5h4.5m-4.5 0L9 15M20.25 3.75h-4.5m4.5 0v4.5m0-4.5L15 9m5.25 11.25h-4.5m4.5 0v-4.5m0 4.5L15 15" />
            </svg>            
          </button>
        </div> -->
      
      </div>

    </div>

    <!-- Desktop Form Navigator -->
    <div class="mx-4 hidden lg:flex lg:border-t lg:border-b lg:border-gray-200">
      <nav class="w-full" aria-label="Progress">
        <ol permission="list" class="rounded-md overflow-hidden lg:flex lg:border-l lg:border-r lg:border-gray-200 lg:rounded-none">
          
          <li *ngIf="!quick_add" (click)="switchFormPage(1)" class="cursor-pointer relative overflow-hidden lg:flex-1 hover:-translate-y-px transition-all ease-in-out">
            <div class="border border-gray-200 overflow-hidden border-b-0 rounded-t-md lg:border-0"> 
              <a class="group">
                
                <span class="absolute top-0 left-0 w-1 h-full {{ page === 1 ? 'bg-indigo-600' : 'group-hover:bg-gray-200' }} lg:w-full lg:h-1 lg:bottom-0 lg:top-auto" aria-hidden="true"></span>
                  
                <span class="px-2 lg:px-6 py-5 flex items-start text-sm font-medium">
            
                  <span class="flex-shrink-0">
                    <span class="w-10 h-10 flex items-center justify-center {{ page === 1 ? 'border-indigo-600' : 'border-gray-200'}} border-2 rounded-full">
                      <span class="{{page === 1 ? 'text-indigo-600' : 'text-gray-500' }}">01</span>
                    </span>
                  </span>

                  <span class="mt-0.5 ml-4 min-w-0 flex flex-col">
                    <span class="text-xs font-semibold {{ page === 1 ? 'text-indigo-600' : 'text-gray-500' }} tracking-wide uppercase">Basic Info</span>
                    <span class="text-sm font-medium {{ page === 1 ? 'text-gray-700' : 'text-gray-500' }}">Personal & Contact Details</span>
                  </span>

                </span>

              </a>
            </div>
          </li>

          <li *ngIf="!quick_add" (click)="switchFormPage(2)" class="cursor-pointer relative overflow-hidden lg:flex-1 hover:-translate-y-px transition-all ease-in-out">
            <div class="border border-gray-200 overflow-hidden lg:border-0">
              
              <a aria-current="step" class="group">
                
                <span class="absolute top-0 left-0 w-1 h-full {{ page === 2 ? 'bg-indigo-600' : 'group-hover:bg-gray-200' }} lg:w-full lg:h-1 lg:bottom-0 lg:top-auto" aria-hidden="true"></span>
                
                <span class="px-2 lg:px-6 py-5 flex items-start text-sm font-medium lg:pl-9">             
                    
                  <span class="flex-shrink-0">
                    <span class="w-10 h-10 flex items-center justify-center {{ page === 2 ? 'border-indigo-600' : 'border-gray-200'}} border-2 rounded-full">
                      <span class="{{page === 2 ? 'text-indigo-600' : 'text-gray-500' }}">02</span>
                    </span>
                  </span>

                  <span class="mt-0.5 ml-4 min-w-0 flex flex-col">
                    <span class="text-xs font-semibold {{ page === 2 ? 'text-indigo-600' : 'text-gray-500' }} tracking-wide uppercase">Membership Info</span>
                    <span class="text-sm font-medium {{ page === 2 ? 'text-gray-700' : 'text-gray-500' }}">Church Related Details</span>
                  </span>

                </span>

              </a>

              <div class="hidden absolute top-0 left-0 w-3 inset-0 lg:block" aria-hidden="true">
                <svg class="h-full w-full text-gray-300" viewBox="0 0 12 82" fill="none"preserveAspectRatio="none">
                  <path d="M0.5 0V31L10.5 41L0.5 51V82" stroke="currentcolor" vector-effect="non-scaling-stroke"></path>
                </svg>
              </div>

            </div>
          </li>

          <li *ngIf="!quick_add" (click)="switchFormPage(3)" class="cursor-pointer relative overflow-hidden lg:flex-1 hover:-translate-y-px transition-all ease-in-out">
            <div class="border border-gray-200 overflow-hidden border-t-0 rounded-b-md lg:border-0">
              <a class="group">
                
                <span class="absolute top-0 left-0 w-1 h-full {{ page === 3 ? 'bg-indigo-600' : 'group-hover:bg-gray-200' }} lg:w-full lg:h-1 lg:bottom-0 lg:top-auto" aria-hidden="true"></span>
                
                <span class="px-2 lg:px-6 py-5 flex items-start text-sm font-medium lg:pl-9">
                  
                  <span class="flex-shrink-0">
                    <span class="w-10 h-10 flex items-center justify-center {{ page === 3 ? 'border-indigo-600' : 'border-gray-200'}} border-2 rounded-full">
                      <span class="{{page === 3 ? 'text-indigo-600' : 'text-gray-500' }}">03</span>
                    </span>
                  </span>

                  <span class="mt-0.5 ml-4 min-w-0 flex flex-col">
                    <span class="text-xs font-semibold {{ page === 3 ? 'text-indigo-600' : 'text-gray-500' }} tracking-wide uppercase">Other Info</span>
                    <span class="text-sm font-medium {{ page === 3 ? 'text-gray-700' : 'text-gray-500' }}">Other Info & Notes</span>
                  </span>

                </span>

              </a>

              <div class="hidden absolute top-0 left-0 w-3 inset-0 lg:block" aria-hidden="true">
                <svg class="h-full w-full text-gray-300" viewBox="0 0 12 82" fill="none"preserveAspectRatio="none">
                  <path d="M0.5 0V31L10.5 41L0.5 51V82" stroke="currentcolor" vector-effect="non-scaling-stroke"></path>
                </svg>
              </div>
              
            </div>
          </li>

          <li *ngIf="!quick_add && staff_checked" (click)="switchFormPage(4)" class="cursor-pointer relative overflow-hidden lg:flex-1 hover:-translate-y-px transition-all ease-in-out">
            <div class="border border-gray-200 overflow-hidden border-t-0 rounded-b-md lg:border-0">
              
              <a class="group">
                
                <span class="absolute top-0 left-0 w-1 h-full {{ page === 4 ? 'bg-indigo-600' : 'group-hover:bg-gray-200' }} lg:w-full lg:h-1 lg:bottom-0 lg:top-auto" aria-hidden="true"></span>
                
                <span class="px-2 lg:px-6 py-5 flex items-start text-sm font-medium lg:pl-9">
                  
                  <span class="flex-shrink-0">
                    <span class="w-10 h-10 flex items-center justify-center {{ page === 4 ? 'border-indigo-600' : 'border-gray-200'}} border-2 rounded-full">
                      <span class="{{page === 4 ? 'text-indigo-600' : 'text-gray-500' }}">04</span>
                    </span>
                  </span>

                  <span class="mt-0.5 ml-4 min-w-0 flex flex-col">
                    <span class="text-xs font-semibold {{ page === 4 ? 'text-indigo-600' : 'text-gray-500' }} tracking-wide uppercase">Staff Admission</span>
                    <span class="text-sm font-medium {{ page === 4 ? 'text-gray-700' : 'text-gray-500' }}">Staff Admission Info.</span>
                  </span>

                </span>

              </a>

              <div class="hidden absolute top-0 left-0 w-3 inset-0 lg:block" aria-hidden="true">
                <svg class="h-full w-full text-gray-300" viewBox="0 0 12 82" fill="none"preserveAspectRatio="none">
                  <path d="M0.5 0V31L10.5 41L0.5 51V82" stroke="currentcolor" vector-effect="non-scaling-stroke"></path>
                </svg>
              </div>
              
            </div>
          </li>
          
          <!-- If Quick Form -->
          <li *ngIf="quick_add" (click)="switchFormPage(1)" class="cursor-pointer relative overflow-hidden lg:flex-1 hover:-translate-y-px transition-all ease-in-out">
            <div class="border border-gray-200 overflow-hidden border-b-0 rounded-t-md lg:border-0"> 
              <a class="group flex justify-between">
                
                <span class="absolute top-0 left-0 w-1 h-full {{page === 1 ? 'bg-indigo-600' : 'group-hover:bg-gray-200'}} lg:w-full lg:h-1 lg:bottom-0 lg:top-auto" aria-hidden="true"></span>
                  
                <span class="px-2 lg:px-6 py-5 flex items-start text-sm font-medium">
                    
                  <span class="flex-shrink-0">
                    <span class="w-10 h-10 flex items-center justify-center {{page === 1 ? 'bg-indigo-600' : 'bg-gray-300'}} rounded-full">
                      <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="ml-0.5 w-6 h-6 text-white">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M18 7.5v3m0 0v3m0-3h3m-3 0h-3m-2.25-4.125a3.375 3.375 0 1 1-6.75 0 3.375 3.375 0 0 1 6.75 0ZM3 19.235v-.11a6.375 6.375 0 0 1 12.75 0v.109A12.318 12.318 0 0 1 9.374 21c-2.331 0-4.512-.645-6.374-1.766Z"></path>
                      </svg>
                    </span>
                  </span>

                  <span class="mt-0.5 ml-4 min-w-0 flex flex-col">
                    <span class="text-xs font-semibold {{page === 1 ? 'text-indigo-700' : 'text-gray-500'}} tracking-wide uppercase">Quick Add (Basic Info Only)</span>
                    <span class="text-sm font-medium {{page === 1 ? 'text-indigo-700' : 'text-gray-500'}}">More details can be added later. Click expand for full form</span>
                  </span>

                </span>

                <span type="button" *ngIf="!staff_checked" (click)="quick_add = !quick_add" class="px-2 lg:px-6 py-5 flex hover:-translate-y-px transition-all ease-in-out items-end text-sm font-medium">
                  <span class="w-10 h-10 flex items-center justify-center  border-indigo-600 border-2 rounded-full shadow-lg">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5 text-indigo-700">
                      <path stroke-linecap="round" stroke-linejoin="round" d="M3.75 3.75v4.5m0-4.5h4.5m-4.5 0L9 9M3.75 20.25v-4.5m0 4.5h4.5m-4.5 0L9 15M20.25 3.75h-4.5m4.5 0v4.5m0-4.5L15 9m5.25 11.25h-4.5m4.5 0v-4.5m0 4.5L15 15" />
                    </svg>     
                  </span>
                </span>

              </a>
            </div>
          </li>

          <li *ngIf="quick_add && staff_checked" (click)="switchFormPage(2)" class="cursor-pointer relative overflow-hidden lg:flex-1 hover:-translate-y-px transition-all ease-in-out">
            <div class="border border-gray-200 overflow-hidden border-t-0 rounded-b-md lg:border-0">
              <a class="group">
                
                <span class="absolute top-0 left-0 w-1 h-full {{ page === 2 ? 'bg-indigo-600' : 'group-hover:bg-gray-200' }} lg:w-full lg:h-1 lg:bottom-0 lg:top-auto" aria-hidden="true"></span>
                
                <span class="px-2 lg:px-6 py-5 flex items-start text-sm font-medium lg:pl-9">
                  
                  <span class="flex-shrink-0">
                    <span class="w-10 h-10 flex items-center justify-center {{ page === 2 ? 'border-indigo-600' : 'border-gray-200'}} border-2 rounded-full">
                      <span class="{{ page === 2 ? 'text-indigo-600' : 'text-gray-500' }}">02</span>
                    </span>
                  </span>

                  <span class="mt-0.5 ml-4 min-w-0 flex flex-col">
                    <span class="text-xs font-semibold {{ page === 2 ? 'text-indigo-600' : 'text-gray-500' }} tracking-wide uppercase">Staff Admission</span>
                    <span class="text-sm font-medium {{ page === 2 ? 'text-gray-700' : 'text-gray-500' }}">Staff Admission Info.</span>
                  </span>

                </span>

              </a>

              <div class="hidden absolute top-0 left-0 w-3 inset-0 lg:block" aria-hidden="true">
                <svg class="h-full w-full text-gray-300" viewBox="0 0 12 82" fill="none"preserveAspectRatio="none">
                  <path d="M0.5 0V31L10.5 41L0.5 51V82" stroke="currentcolor" vector-effect="non-scaling-stroke"></path>
                </svg>
              </div>
              
            </div>
          </li>

        </ol>
      </nav>
    </div>

    <!-- Mobile Form Navigator -->
    <div class="mx-4 lg:hidden block border-b border-gray-200">

      <nav *ngIf="!quick_add"  class="-mb-px flex" aria-label="Tabs">
        
        <a (click)="switchFormPage(1)" class="{{ page === 1? 'border-indigo-500 text-indigo-600' : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300' }} w-1/3 py-4 px-1 text-center border-b-2 font-medium text-sm">
          Personal Info
        </a>

        <a (click)="switchFormPage(2)" class="{{ page === 2? 'border-indigo-500 text-indigo-600' : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300' }} w-1/3 py-4 px-1 text-center border-b-2 font-medium text-sm">
          Admission Info
        </a>

        <a (click)="switchFormPage(3)" class="{{ page === 3? 'border-indigo-500 text-indigo-600' : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300' }} w-1/3 py-4 px-1 text-center border-b-2 font-medium text-sm">
          Other Info
        </a>

      </nav>

      <nav *ngIf="quick_add"  class="-mb-px flex justify-start" aria-label="Tabs">
        <a (click)="switchFormPage(1)" class="flex justify-start border-indigo-500 text-indigo-600 w-full py-4 px-1 text-center border-b-2 font-medium text-sm">
          Quick Add (Basic Info)
        </a>
      </nav>

    </div>

    <!-- Full Form -->
    <div id="full_form"  *ngIf="!quick_add" class="max-h-screen w-full overflow-y-auto px-6 pb-48 lg:pb-96">

      <!-- Mobile Instruction -->
      <div class="flex lg:hidden col-span-2 pt-4 dark:border-gray-500">
        <span class="text-sm text-rose-500">(Fields Marked '*' Are Required)</span>
      </div>

      <div *ngIf="page === 1" class="pb-1">

        <div class="px-2 lg:px-6 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 lg:space-y-6 sm:grid-cols-2 sm:gap-x-8 lg:space-x-2 col-span-2 mb-4 dark:border-gray-500 gap-y-4 lg:gap-y-0">
          
          <p class="text-md leading-5 text-indigo-700 dark:text-indigo-400 md:col-span-2 lg:col-span-3 mt-4">Personal Information:</p>

            <div class="col-span-2 md:col-span-1">
              <label for="first_name" class="block text-sm font-medium text-gray-900 dark:text-gray-300">First Name <span class="text-sm text-rose-500">*</span> </label>
              <div class="mt-1">
                <input type="text" id="first_name" name="first_name" placeholder="eg. Simon" [(ngModel)]="member.first_name" autocomplete="true" class="placeholder:text-sm dark:bg-gray-600 dark:placeholder:text-white/60 dark:text-white/80 appearance-none min-w-0 w-full bg-white border border-gray-300 rounded-md shadow-sm py-2 px-4 text-base text-gray-900 placeholder-gray-500 focus:outline-none focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500">
              </div>
            </div>

            <div class="col-span-2 md:col-span-1">
              <label for="last_name" class="block text-sm font-medium text-gray-900 dark:text-gray-300">Last Name <span class="text-sm text-rose-500">*</span>  </label>
              <div class="mt-1">
                <input type="text" id="last_name" name="last_name" placeholder="eg. Peter" [(ngModel)]="member.last_name" autocomplete="true" class="placeholder:text-sm dark:bg-gray-600 dark:placeholder:text-white/60 dark:text-white/80 appearance-none min-w-0 w-full bg-white border border-gray-300 rounded-md shadow-sm py-2 px-4 text-base text-gray-900 placeholder-gray-500 focus:outline-none focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500">
              </div>
            </div>

            <div class="col-span-2 md:col-span-1">
              <label for="other_names" class="block text-sm font-medium text-gray-900 dark:text-gray-300">Other Name(s) </label>
              <div class="mt-1">
                <input type="text" id="other_names" name="other_names" placeholder="eg. Cephas" [(ngModel)]="member.other_names" autocomplete="true" class="placeholder:text-sm dark:bg-gray-600 dark:placeholder:text-white/60 dark:text-white/80 appearance-none min-w-0 w-full bg-white border border-gray-300 rounded-md shadow-sm py-2 px-4 text-base text-gray-900 placeholder-gray-500 focus:outline-none focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500">
              </div>
            </div> 

            <div class="hidden md:block col-span-1 lg:hidden">
              <label for="birth_date" class="block text-sm font-medium text-gray-900 dark:text-gray-300">Date of Birth </label>
              <div class="mt-1">
                <input type="date" id="birth_date" format="dd-MM-yy" name="birth_date" placeholder="Select Date" [(ngModel)]="member.birth_date" class="placeholder:text-sm placeholder:text-gray-300 dark:bg-gray-600 h-10 dark:placeholder:text-white/60 dark:text-white/80 appearance-none min-w-0 w-full bg-white border border-gray-300 rounded-md shadow-sm py-2 px-4 text-base text-gray-900 placeholder-gray-500 focus:outline-none focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500">
              </div>
            </div>

            <div class="col-span-2 lg:col-span-3 grid grid-cols-4 gap-6">

              <div class="col-span-4 md:hidden lg:block lg:col-span-1">
                <label for="birth_date" class="block text-sm font-medium text-gray-900 dark:text-gray-300">Date of Birth </label>
                <div class="mt-1">
                  <input type="date" id="birth_date" format="dd-MM-yy" name="birth_date" placeholder="Select Date" [(ngModel)]="member.birth_date" class="placeholder:text-sm placeholder:text-gray-300 dark:bg-gray-600 h-10 dark:placeholder:text-white/60 dark:text-white/80 appearance-none min-w-0 w-full bg-white border border-gray-300 rounded-md shadow-sm py-2 px-4 text-base text-gray-900 placeholder-gray-500 focus:outline-none focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500">
                </div>
              </div>

              <div class="col-span-4 md:col-span-2 lg:col-span-1">
                <span for="gender" class="block text-sm font-medium text-gray-900 dark:text-gray-300">Gender <span class="text-sm text-rose-500">*</span> </span>
                <div class="mt-1">
                  <ng-select appendTo="Body" name="gender" id="gender" [(ngModel)]="member.gender" [clearable]="false" [required]="true" placeholder="Select Gender">
                    <ng-option *ngFor="let gen of jsonData.gender" [value]="gen.id">{{gen.name}}</ng-option>
                  </ng-select>
                </div>
              </div>

            <div class="col-span-4 md:col-span-2 lg:col-span-1">
              <span for="title" class="block text-sm font-medium text-gray-900 dark:text-gray-300">Title</span>
              <div class="mt-1">
                <ng-select appendTo="Body" name="title" id="title" [(ngModel)]="member.title" autocomplete="true" [clearable]="true" placeholder="Search / Select Title">
                  <ng-option *ngFor="let title of jsonData.titles" [value]="title.id">{{title.name}}</ng-option>
                </ng-select>
              </div>
            </div>   

            <div class="col-span-4 md:col-span-2 lg:col-span-1 space-x-2 flex items-center justify-between">
              <div class="flex-shrink-0 inline-block rounded-full overflow-hidden h-24 w-24" aria-hidden="true">
                <img class="rounded-md h-full w-full" [src]="this.member.photo" alt="">
              </div>
              <div class="rounded-md shadow-sm w-full">
                <div (click)="openModal()" class="group relative border cursor-pointer border-gray-300 rounded-md p-3 flex items-center justify-center hover:bg-gray-50 focus-within:ring-2 focus-within:ring-offset-2 focus-within:ring-indigo-500">
                  <label for="selected_image" class="relative text-sm leading-4 marker:font-medium text-gray-700 pointer-events-none">
                    <span>{{ croppedImage === data.avatar ? 'Add' : 'Change' }} Photo</span>
                  </label>
                </div>
              </div>
              <!-- <div class="rounded-md shadow-sm w-full">
                <div class="group relative border cursor-pointer border-gray-300 rounded-md p-3 flex items-center justify-center hover:bg-gray-50 focus-within:ring-2 focus-within:ring-offset-2 focus-within:ring-indigo-500">
                  <label for="selected_image" class="relative text-sm leading-4 marker:font-medium text-gray-700 pointer-events-none">
                    <span>{{ croppedImage === data.avatar ? 'Add' : 'Change' }} Photo</span>
                  </label>
                  <input id="selected_image" name="selected_image" type="file" (change)="fileChangeEvent($event)" accept="image/*" class="absolute w-full h-full opacity-0 cursor-pointer border-gray-300 rounded-md">
                </div>
              </div> -->
            </div>

          </div>

        </div>

        <div class="px-2 lg:px-6 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-y-6 sm:grid-cols-2 sm:gap-x-8 col-span-2 border-indigo-100 border-t mb-4 pb-3 dark:border-gray-500">
          
          <p class="text-md leading-5 text-indigo-700 dark:text-indigo-400 md:col-span-2 lg:col-span-3 mt-6">Contact Information:</p>

          <div class="col-span-2 md:col-span-1">
              <label for="phone1" class="block text-sm font-medium text-gray-900 dark:text-gray-300">  Phone Number 1 </label>
            <div class="mt-1">
              <input type="text" id="phone1" name="phone1" placeholder="eg. (+233)-234-56-788" [(ngModel)]="member.phone1" autocomplete="false" class="placeholder:text-sm dark:bg-gray-600 dark:placeholder:text-white/60 dark:text-white/80 appearance-none min-w-0 w-full bg-white border border-gray-300 rounded-md shadow-sm py-2 px-4 text-base text-gray-900 placeholder-gray-500 focus:outline-none focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500">
            </div>
          </div>

          <div class="col-span-2 md:col-span-1">
              <label for="phone2" class="block text-sm font-medium text-gray-900 dark:text-gray-300">  Phone Number 2 </label>
            <div class="mt-1">
              <input type="text" id="phone2" name="phone2" placeholder="eg. (+233)-234-56-789" [(ngModel)]="member.phone2" autocomplete="false" class="placeholder:text-sm dark:bg-gray-600 dark:placeholder:text-white/60 dark:text-white/80 appearance-none min-w-0 w-full bg-white border border-gray-300 rounded-md shadow-sm py-2 px-4 text-base text-gray-900 placeholder-gray-500 focus:outline-none focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500">
            </div>
          </div>

          <div class="col-span-2 md:col-span-1">
            <label for="email" class="block text-sm font-medium text-gray-900 dark:text-gray-300">Email </label>
            <div class="mt-1">
              <input type="email" id="email" name="email"placeholder="eg. simonpeter123@abc.com" [(ngModel)]="member.email" autocomplete="true"  class="placeholder:text-sm dark:bg-gray-600 dark:placeholder:text-white/60 dark:text-white/80 appearance-none min-w-0 w-full bg-white border border-gray-300 rounded-md shadow-sm py-2 px-4 text-base text-gray-900 placeholder-gray-500 focus:outline-none focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500">
            </div>
          </div>

        </div>

      </div>

      <div *ngIf="page === 2">

        <div class="px-2 lg:px-6 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-y-6 gap-x-8 col-span-2  mb-10 dark:border-gray-500">
          
          <p class="text-md leading-5 text-indigo-700 dark:text-indigo-400 md:col-span-2 lg:col-span-3 mt-6">Membership Information:</p>

          <div class="col-span-2 md:col-span-1">
            <label for="member_id" class="block text-sm font-medium text-gray-900 dark:text-gray-300">Member ID <span class="text-sm text-rose-500">*</span> <span class="text-gray-500 text-sm"> (Last ID - {{jsonData.last_member_id}}):</span> </label>
            <div class="mt-1">
              <input type="text" id="member_id" name="member_id" placeholder="Member ID" disabled [(ngModel)]="member.member_id" autocomplete="false" class="bg-indigo-50 placeholder:text-sm dark:bg-gray-600 dark:placeholder:text-white/60 dark:text-white/80 appearance-none min-w-0 w-full border border-gray-300 rounded-md shadow-sm py-2 px-4 text-base text-gray-900 placeholder-gray-500 focus:outline-none focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500">
            </div>
          </div>

          <div class="col-span-2 md:col-span-1">
            <label for="join_date" class="block text-sm font-medium text-gray-900 dark:text-gray-300">Admission Date </label>
            <div class="mt-1">
              <input type="date" id="join_date" name="join_date" [(ngModel)]="member.join_date" class="placeholder:text-sm placeholder:text-gray-300 dark:bg-gray-600 dark:placeholder:text-white/60 dark:text-white/80 appearance-none min-w-0 w-full bg-white border border-gray-300 rounded-md shadow-sm py-2 px-4 text-base text-gray-900 placeholder-gray-500 focus:outline-none focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500">
            </div>
          </div>

          <div class="col-span-2 md:col-span-1">
            <span for="branch" class="block text-sm font-medium text-gray-900 dark:text-gray-300">Branch <span class="text-sm text-rose-500">*</span> </span>
            <div class="mt-1">
              <ng-select appendTo="Body" id="branch" name="branch" [(ngModel)]="member.branch" [clearable]="false" [required]="true" placeholder="Select Branch">
                <ng-option *ngFor="let branch of jsonData.branches" [value]="branch.id">{{branch.name}}</ng-option>
              </ng-select>
            </div>
          </div>

          <div class="col-span-2 md:col-span-1">
            <span for="active_status" class="block text-sm font-medium text-gray-900 dark:text-gray-300">Membership Status <span class="text-sm text-rose-500">*</span></span>
            <div class="mt-1">
              <ng-select appendTo="Body" id="active_status" name="active_status" [(ngModel)]="member.active_status" [clearable]="false" [required]="true" placeholder="Select Status">
                <ng-option *ngFor="let status of jsonData.active_statuses" [value]="status.id">{{status.name}}</ng-option>
              </ng-select>
            </div>
          </div>

          <div class="col-span-2 md:col-span-1">
            <span for="baptism_status" class="block text-sm font-medium text-gray-900 dark:text-gray-300">Baptismal Status </span>
            <div class="mt-1">
              <ng-select appendTo="Body" id="baptism_status" name="baptism_status" [(ngModel)]="member.baptism_status" placeholder="Select Status">
                <ng-option *ngFor="let status of jsonData.baptism_statuses" [value]="status.id">{{status.name}}</ng-option>
              </ng-select>
            </div>
          </div>

          <div class="col-span-2 md:col-span-1">
            <span for="invited_by" class="block text-sm font-medium text-gray-900 dark:text-gray-300">Invited By </span>
            <div class="mt-1">
              <ng-select appendTo="Body" id="invited_by" name="invited_by" [(ngModel)]="member.invited_by" placeholder="Search / Select Person">
                <ng-option *ngFor="let member of jsonData.members" [value]="member.id" class="flex items-center justify-start">
                  <img class="rounded-sm h-8 w-8 inline-block mr-3" [src]="member.photo">
                  <div class="inline-block text-lg">{{member.first_name}} {{member.other_names}} {{member.last_name}} ({{member.member_id}})</div>
                </ng-option>
              </ng-select>
            </div>
          </div>

          <div class="col-span-2 md:col-span-1">
            <span for="siblings" class="block text-sm font-medium text-gray-900 dark:text-gray-300">Siblings </span>
            <div class="mt-1">
              <ng-select appendTo="Body" id="siblings" name="siblings" [(ngModel)]="member.siblings" [multiple]="true" placeholder="Search / Select Person">
                <ng-option *ngFor="let member of jsonData.members" [value]="member.id" class="flex items-center justify-start">
                  <img class="rounded-sm h-8 w-8 inline-block mr-3" [src]="member.photo">
                  <div class="inline-block text-lg">{{member.first_name}} {{member.other_names}} {{member.last_name}} ({{member.member_id}})</div>
                </ng-option>
              </ng-select>
            </div>
          </div>

          <div class="col-span-2 md:col-span-1">
            <span for="souls" class="block text-sm font-medium text-gray-900 dark:text-gray-300">Souls </span>
            <div class="mt-1">
              <ng-select appendTo="Body" id="souls" name="souls" [(ngModel)]="member.souls" [multiple]="true" placeholder="Search / Select Person">
                <ng-option *ngFor="let member of jsonData.members" [value]="member.id" class="flex items-center justify-start">
                  <img class="rounded-sm h-8 w-8 inline-block mr-3" [src]="member.photo">
                  <div class="inline-block text-lg">{{member.first_name}} {{member.other_names}} {{member.last_name}} ({{member.member_id}})</div>
                </ng-option>
              </ng-select>
            </div>
          </div>

        </div>

        <div class="px-2 lg:px-6 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-y-6 gap-x-8 col-span-2 border-indigo-100 border-t mb-4 pb-8 dark:border-gray-500">
          
          <p class="text-md leading-5 text-indigo-700 dark:text-indigo-400 md:col-span-2 lg:col-span-3 mt-6">Member Groups:</p>

          <div class="col-span-2 md:col-span-1">
            <span for="cell_group" class="block text-sm font-medium text-gray-900 dark:text-gray-300">Cell Group</span>
            <div class="mt-1">
              <ng-select appendTo="Body" id="cell_group" name="cell_group" [(ngModel)]="member.cell_group" placeholder="Search / Select Cell">
                <ng-option *ngFor="let group of jsonData.cell_groups" [value]="group.id">{{group.name}}</ng-option>
              </ng-select>
            </div>
          </div>

          <div class="col-span-2 md:col-span-1">
            <span for="shepherds" class="block text-sm font-medium text-gray-900 dark:text-gray-300">Assign Shepherds</span>
            <div class="mt-1">
              <ng-select appendTo="Body" id="shepherds" name="shepherds" [(ngModel)]="member.shepherds" [multiple]="true" placeholder="Search / Select Shepherds">
                <ng-option *ngFor="let shepherd of jsonData.shepherds" [value]="shepherd.id">
                  <img class="rounded-sm h-8 w-8 inline-block mr-3" [src]="shepherd.photo">
                  <div class="inline-block text-lg">{{shepherd.first_name}} {{shepherd.other_names}} {{shepherd.last_name}} ({{shepherd.member_id}})</div>
                </ng-option>
              </ng-select>
            </div>
          </div>

          <div class="col-span-2 md:col-span-1">
            <span for="ministries" class="block text-sm font-medium text-gray-900 dark:text-gray-300">Assign Ministries / Groups </span>
            <div class="mt-1">
              <ng-select appendTo="Body" id="ministries" name="ministries" [(ngModel)]="member.ministries" [multiple]="true" placeholder="Search / Select Ministries">
                <ng-option *ngFor="let ministry of jsonData.ministries" [value]="ministry.id">{{ministry.name}}</ng-option>
              </ng-select>
            </div>
          </div>

        </div>

      </div>

      <div *ngIf="page === 3">  

        <div class="px-2 lg:px-6 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-y-6 gap-x-8 col-span-2 mb-4 lg:mb-14 lg:pb-1 dark:border-gray-500">
          
          <div class="flex md:hidden text-md leading-5 text-indigo-700 col-span-2 lg:col-span-3 dark:text-indigo-400 mt-6">Other Information:</div>

          <div class="flex items-center justify-between md:col-span-2 lg:col-span-3 my-3">          
            <p class="hidden md:flex text-md leading-5 text-indigo-700 dark:text-indigo-400 mt-6">Other Information:</p>
            <p class="flex leading-5 text-indigo-700 dark:text-indigo-400 items-center justify-end">
              <label for="is_staff_checked" class="flex font-bold text-indigo-700 px-1 pr-4 textt-md lg:text-lg"><span class="text-rose-500">** </span> Member Is Church Staff?:</label>
              <input id="is_staff_checked" type="checkbox" name="is_staff_checked" [(ngModel)]="staff_checked" (ngModelChange)="changeUser();" class="flex w-5 h-5 text-indigo-700 accent-indigo-700 bg-gray-100 rounded border-gray-300 focus:ring-indigo-500 dark:focus:ring-indigo-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600">
            </p>
          </div>   

          <div class="col-span-2 md:col-span-1">
            <span for="age_group" class="block text-sm font-medium text-gray-900 dark:text-gray-300">Age Group <span class="text-sm text-rose-500">*</span> </span>
            <div class="mt-1">
              <ng-select appendTo="Body" id="age_group" name="age_group" [(ngModel)]="member.age_group" [clearable]="false" placeholder="Select Age Group">
                <ng-option *ngFor="let group of jsonData.age_groups" [value]="group.id">{{group.name}}</ng-option>
              </ng-select>
            </div>
          </div>          

          <div class="col-span-2 md:col-span-1">
            <span for="marital_status" class="block text-sm font-medium text-gray-900 dark:text-gray-300">Marital Status </span>
            <div class="mt-1">
              <ng-select appendTo="Body" id="marital_status" name="marital_status" [(ngModel)]="member.marital_status" [clearable]="false" placeholder="Select Status">
                <ng-option *ngFor="let status of jsonData.marital_statuses" [value]="status.id">{{status.name}}</ng-option>
              </ng-select>
            </div>
          </div>

          <div class="col-span-2 md:col-span-1">
            <span for="edu_level" class="block text-sm font-medium text-gray-900 dark:text-gray-300">Highest Educational Level </span>
            <div class="mt-1">
              <ng-select appendTo="Body" id="edu_level" name="edu_level" [(ngModel)]="member.edu_level" placeholder="Search / Select Level">
                <ng-option *ngFor="let level of jsonData.edu_levels" [value]="level.id">{{level.name}}</ng-option>
              </ng-select>
            </div>
          </div>

          <div class="col-span-2 md:col-span-1">
            <span for="nationality" class="block text-sm font-medium text-gray-900 dark:text-gray-300">Nationality </span>
            <div class="mt-1">
              <ng-select appendTo="Body" id="nationality" name="nationality" [(ngModel)]="member.nationality" placeholder="Search / Select Nationality">
                <ng-option *ngFor="let country of jsonData.countries" [value]="country.id">
                  <img class="rounded-sm h-6 w-6 inline-block mr-3" [src]="country.flag">
                  <div class="inline-block text-lg">{{country.name}}</div>
                </ng-option>
              </ng-select>            
            </div>
          </div>

          <div class="col-span-2 md:col-span-1">
            <label for="resid_address" class="block text-sm font-medium text-gray-900 dark:text-gray-300">Residential Address </label>
            <div class="mt-1">
              <textarea rows="2" type="text" id="resid_address" name="resid_address" placeholder="eg. No. 1234, ABC Street / GPS" [(ngModel)]="member.resid_address" class="placeholder:text-sm dark:bg-gray-600 dark:placeholder:text-white/60 dark:text-white/80 appearance-none min-w-0 w-full bg-white border border-gray-300 rounded-md shadow-sm py-2 px-4 text-base text-gray-900 placeholder-gray-500 focus:outline-none focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500"></textarea>
            </div>
          </div>
          
          <div class="col-span-2 md:col-span-1">
            <label for="notes" class="block text-sm font-medium text-gray-900 dark:text-gray-300">Notes </label>
            <div class="mt-1">
              <textarea rows="2" type="text" id="notes" name="notes" placeholder="Any other info" [(ngModel)]="member.notes" class="placeholder:text-sm dark:bg-gray-600 dark:placeholder:text-white/60 dark:text-white/80 appearance-none min-w-0 w-full bg-white border border-gray-300 rounded-md shadow-sm py-2 px-4 text-base text-gray-900 placeholder-gray-500 focus:outline-none focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500"></textarea>
            </div>
          </div>

          </div>

          <div *ngIf="staff_checked" class="px-2 lg:px-6 grid grid-cols-1 lg:hidden gap-y-6 sm:gap-x-8 col-span-2 border-indigo-100 border-t mb-4 dark:border-gray-500">

            <div class="px-2 lg:px-6 grid grid-cols-1 md:grid-cols-2 gap-y-6 sm:gap-x-8 col-span-1 mb-4 dark:border-gray-500">
              
              <p class="text-md leading-5 text-indigo-700 dark:text-indigo-400 col-span-1 md:col-span-2 mt-6">Staff Admission Information:</p>
              
              <div class="col-span-2 md:col-span-1">
                <label for="staff_id" class="block text-sm font-medium text-gray-900 dark:text-gray-300">Staff ID <span class="text-sm text-rose-500">* </span> <span class="text-gray-500 text-sm"> (Last ID - {{jsonData.last_staff_id}}):</span> </label>
                <div class="mt-1">
                  <input type="text" id="staff_id" name="staff_id" placeholder="Staff ID" disabled [(ngModel)]="staff.staff_id" autocomplete="false" class="bg-indigo-50 placeholder:text-sm dark:bg-gray-600 dark:placeholder:text-white/60 dark:text-white/80 appearance-none min-w-0 w-full border border-gray-300 rounded-md shadow-sm py-2 px-4 text-base text-gray-900 placeholder-gray-500 focus:outline-none focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500">
                </div>
              </div>

              <div class="col-span-2 md:col-span-1">
                <label for="dept" class="block text-sm font-medium text-gray-900 dark:text-gray-300">Department(s)</label>
                <div class="mt-2">
                  <ng-select appendTo="Body" id="dept" name="dept" [(ngModel)]="staff.dept" [multiple]="true" placeholder="Search / Select ">
                    <ng-option *ngFor="let dept of jsonData.departments" [value]="dept.id">{{dept.name}}</ng-option>
                  </ng-select>
                </div>
              </div>

              <div class="col-span-2 md:col-span-1">
                <label for="position" class="block text-sm font-medium text-gray-900 dark:text-gray-300">Position </label>
                <div class="mt-2">
                  <ng-select appendTo="Body" id="position" name="position" [(ngModel)]="staff.position" [multiple]="true" placeholder="Search / Select ">
                    <ng-option *ngFor="let position of jsonData.positions" [value]="position.id">{{position.name}}</ng-option>
                  </ng-select>
                </div>
              </div>

              <div class="col-span-2 md:col-span-1">
                <label for="ministries_led" class="block text-sm font-medium text-gray-900 dark:text-gray-300">Make Group / Ministry Overseer? </label>
                <div class="mt-2">
                  <ng-select appendTo="Body" id="ministries_led" name="ministries_led" [(ngModel)]="staff.ministries_led" [multiple]="true" placeholder="Search / Select ">
                    <ng-option *ngFor="let ministry of jsonData.ministries" [value]="ministry.id">{{ministry.name}}</ng-option>
                  </ng-select>
                </div>
              </div>

              <div class="col-span-2 md:col-span-1">
                <label for="branch_led" class="block text-sm font-medium text-gray-900 dark:text-gray-300">Make Branch Overseer? </label>
                <div class="mt-2">
                  <ng-select appendTo="Body" id="branch_led" name="branch_led" [(ngModel)]="staff.branch_led" [multiple]="true" placeholder="Search / Select ">
                    <ng-option *ngFor="let branch of jsonData.branches" [value]="branch.id">{{branch.name}}</ng-option>
                  </ng-select>
                </div>
              </div>

            </div>

            <div class="px-2 lg:px-6 lg:grid lg:grid-cols-3 gap-y-6 sm:gap-x-8 border-indigo-100 border-t lg:border-t-0 mb-4 dark:border-gray-500">
              
              <p class="text-md leading-5 text-indigo-700 dark:text-indigo-400 lg:col-span-3 mt-6 mb-3 flex">User Permissions: <span class="hidden lg:flex ml-4 col-span-1 text-sm text-rose-500"> (Select applicable permission(s) to user)</span></p>

              <p class="lg:hidden text-sm text-rose-500 mb-4">(Select applicable permission(s) to user)</p>
             
              <div class="pt-4 lg:pb-6 md:px-2 lg:px-6 gap-6 md:grid-cols-2 space-y-4 md:space-y-0 lg:col-span-3 md:grid lg:grid-cols-3 mb-6 mt-3">

              <div class="lg:col-span-1 md:col-span-1 m-3 flex items-center" *ngFor="let permission of jsonData.permissions">
                <input type="checkbox" (change)="togglePermissions(permission.id)" [ngModel]="selectedPermissions.includes(permission.id)" class="mr-2 w-5 h-5 accent-indigo-700 text-indigo-700 rounded-lg border-gray-300 focus:ring-2xl-indigo-500 focus:ring-2">
                <span class="text-rose-500">* </span>{{permission.name}}
              </div>
              </div>

            </div>

          </div>
          
      </div>

      <div class="hidden lg:block" *ngIf="page === 4 && staff_checked">  
      
          <div class="px-2 grid grid-cols-1 gap-y-6 md:grid-cols-2 lg:grid-cols-3 sm:gap-x-8 mb-4 dark:border-gray-500">

            <div class="px-2 lg:px-4 grid md:grid-cols-2 lg:grid-cols-3 gap-y-6 sm:gap-x-8 lg:col-span-3 mb-4 dark:border-gray-500 mt-2">
              
              <p class="flex md:hidden text-md leading-5 text-indigo-700 dark:text-indigo-400 mt-6">Staff Admission Info</p>

              <div class="flex items-center justify-between md:col-span-2 lg:col-span-3 my-3">
                <p class="hidden md:flex text-md leading-5 text-indigo-700 dark:text-indigo-400 mt-6">Staff Admission Info</p>
                <p class="flex leading-5 text-indigo-700 dark:text-indigo-400 items-center justify-end">
                  <label for="is_staff_checked" class="flex font-bold text-indigo-700 px-1 pr-4 textt-md lg:text-lg"><span class="text-rose-500">** </span>Member Is Church Staff?:</label>
                  <input id="is_staff_checked" type="checkbox" name="is_staff_checked" [(ngModel)]="staff_checked" (ngModelChange)="changeUser();" class="flex w-5 h-5 text-indigo-700 accent-indigo-700 bg-gray-100 rounded border-gray-300 focus:ring-indigo-500 dark:focus:ring-indigo-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600">
                </p>
              </div>  
              
              <div class="col-span-1">
                <label for="staff_id" class="block text-sm font-medium text-gray-900 dark:text-gray-300">Staff ID <span class="text-sm text-rose-500">* </span> <span class="text-gray-500 text-sm"> (Last ID - {{jsonData.last_staff_id}}):</span> </label>
                <div class="mt-1">
                  <input type="text" id="staff_id" name="staff_id" placeholder="Staff ID" disabled [(ngModel)]="staff.staff_id" autocomplete="false" class="bg-indigo-50 placeholder:text-sm dark:bg-gray-600 dark:placeholder:text-white/60 dark:text-white/80 appearance-none min-w-0 w-full border border-gray-300 rounded-md shadow-sm py-2 px-4 text-base text-gray-900 placeholder-gray-500 focus:outline-none focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500">
                </div>
              </div>
              
              <div class="col-span-1">
                <label for="dept" class="block text-sm font-medium text-gray-900 dark:text-gray-300">Department(s)</label>
                <div class="mt-2">
                  <ng-select appendTo="Body" id="dept" name="dept" [(ngModel)]="staff.dept" [multiple]="true" placeholder="Search / Select ">
                    <ng-option *ngFor="let dept of jsonData.departments" [value]="dept.id">{{dept.name}}</ng-option>
                  </ng-select>
                </div>
              </div>

              <div class="col-span-1">
                <label for="position" class="block text-sm font-medium text-gray-900 dark:text-gray-300">Position </label>
                <div class="mt-2">
                  <ng-select appendTo="Body" id="position" name="position" [(ngModel)]="staff.position" [multiple]="true" placeholder="Search / Select ">
                    <ng-option *ngFor="let position of jsonData.positions" [value]="position.id">{{position.name}}</ng-option>
                  </ng-select>
                </div>
              </div>

              <div class="col-span-1">
                <label for="ministries_led" class="block text-sm font-medium text-gray-900 dark:text-gray-300">Make Group / Ministry Overseer? </label>
                <div class="mt-2">
                  <ng-select appendTo="Body" id="ministries_led" name="ministries_led" [(ngModel)]="staff.ministries_led" [multiple]="true" placeholder="Search / Select ">
                    <ng-option *ngFor="let ministry of jsonData.ministries" [value]="ministry.id">{{ministry.name}}</ng-option>
                  </ng-select>
                </div>
              </div>

              <div class="col-span-1">
                <label for="branch_led" class="block text-sm font-medium text-gray-900 dark:text-gray-300">Make Branch Overseer? </label>
                <div class="mt-2">
                  <ng-select appendTo="Body" id="branch_led" name="branch_led" [(ngModel)]="staff.branch_led" [multiple]="true" placeholder="Search / Select ">
                    <ng-option *ngFor="let branch of jsonData.branches" [value]="branch.id">{{branch.name}}</ng-option>
                  </ng-select>
                </div>
              </div>

            </div>

            <div class="col-span-2 lg:col-span-3 grid md:grid-cols-2 lg:grid-cols-3 border-t border-indigo-50">
  
              <p class="text-md leading-5 text-indigo-700 dark:text-indigo-400 lg:col-span-3 mt-6 mb-4 ml-6 flex">User Permissions: <span class="hidden lg:flex ml-4 col-span-1 text-sm text-rose-500"> (Select applicable permission(s) to user)</span></p>
  
              <!-- <div class="lg:pb-6 px-2 lg:px-6 gap-6 space-y-6 col-span-3 grid grid-cols-3 mb-4 mt-3"> -->
              
                <div class="lg:col-span-1 md:col-span-1 m-3" *ngFor="let permission of jsonData.permissions">
                  <input type="checkbox" (change)="togglePermissions(permission.id)" [ngModel]="selectedPermissions.includes(permission.id)" class="mr-2 w-5 h-5 accent-indigo-700 text-indigo-700 rounded-lg border-gray-300 focus:ring-2xl-indigo-500 focus:ring-2">
                  <span class="text-rose-500">* </span>{{permission.name}}
                </div>
  
              <!-- </div> -->
  
            </div>

          </div>
          
      </div>

      <!-- Action buttons -->
      <div class="pb-24 md:pt-6 md:px-6 col-span-3 gap-3 flex border-indigo-200 border-t py-4 justify-end">
        <button type="submit" (click)="reset()" class="hover:-translate-y-px hover:shadow-xs active:opacity-85 tracking-tight-rem transition-all ease-in-out w-full bg-gray-200 border border-transparent rounded-md shadow-md p-4 flex items-center justify-center text-base font-medium text-rose-500 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-rose-500 md:w-auto">
          Reset
        </button>
        <button *ngIf="page !== 1" type="submit" (click)="move('previous')" class="hover:-translate-y-px hover:shadow-xs active:opacity-85 tracking-tight-rem transition-all ease-in-out w-full bg-gray-200 border border-transparent rounded-md shadow-md p-4 flex items-center justify-center text-base font-medium text-indigo-700 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 md:w-auto">
          Previous
        </button>
        <button *ngIf="!staff_checked && page !== 3 || staff_checked && page !== 4" type="submit" (click)="move('next')" class="hidden lg:flex hover:-translate-y-px hover:shadow-xs active:opacity-85 tracking-tight-rem transition-all ease-in-out w-full bg-gray-200 border border-transparent rounded-md shadow-md px-8 py-4 items-center justify-center text-base font-medium text-indigo-700 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 md:w-auto">
          Next
        </button>
        <button *ngIf="page !== 3" type="submit" (click)="move('next')" class="lg:hidden hover:-translate-y-px hover:shadow-xs active:opacity-85 tracking-tight-rem transition-all ease-in-out w-full bg-gray-200 border border-transparent rounded-md shadow-md px-8 py-4 flex items-center justify-center text-base font-medium text-indigo-700 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 md:w-auto">
          Next
        </button>
        <button *ngIf="page === 3 && !staff_checked ||  page === 4 && staff_checked " type="submit" (click)="saveMember()" class="hidden lg:flex hover:-translate-y-px hover:shadow-xs active:opacity-85 tracking-tight-rem transition-all ease-in w-full bg-indigo-600 border border-transparent rounded-md shadow-sm px-8 p-4 items-center justify-center text-base font-medium text-white hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 md:w-auto">
          Save
        </button>
        <button *ngIf="page === 3" type="submit" (click)="saveMember()" class="lg:hidden hover:-translate-y-px hover:shadow-xs active:opacity-85 tracking-tight-rem transition-all ease-in w-full bg-indigo-600 border border-transparent rounded-md shadow-sm px-8 p-4 flex items-center justify-center text-base font-medium text-white hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 md:w-auto">
          Save
        </button>
      </div>
      
    </div>

    <!-- Quick Add Form -->
    <div id="quick_form"  *ngIf="quick_add" class="max-h-screen w-full overflow-y-auto px-6 pb-48 lg:pb-96">

      <div *ngIf="page === 1" class="py-4 px-2 lg:px-6 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-y-6 gap-x-8 mb-4 dark:border-gray-500">
                  
          <div class="flex md:hidden text-md leading-5 text-indigo-700 col-span-1 md:col-span-2 lg:col-span-3 dark:text-indigo-400 mt-6">Personal Information:</div>

          <div class="flex items-center justify-between col-span-1 md:col-span-2 lg:col-span-3 my-3">          
            <p class="hidden md:flex text-md leading-5 text-indigo-700 dark:text-indigo-400 mt-6">Personal Information:</p>
            <p class="flex leading-5 text-indigo-700 dark:text-indigo-400 items-center justify-end">
              <label for="is_staff_checked" class="flex font-bold text-indigo-700 px-1 pr-4 textt-md lg:text-lg"><span class="text-rose-500">** </span> Member Is Church Staff?:</label>
              <input id="is_staff_checked" type="checkbox" name="is_staff_checked" [(ngModel)]="staff_checked" (ngModelChange)="changeUser();" class="flex w-5 h-5 text-indigo-700 accent-indigo-700 bg-gray-100 rounded border-gray-300 focus:ring-indigo-500 dark:focus:ring-indigo-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600">
            </p>
          </div>   

        <div class="col-span-1 lg:col-span-3 md:col-span-2 grid md:grid-cols-2 lg:grid-cols-3 gap-6">
    
        <div class="col-span-1">
          <label for="first_name" class="block text-sm font-medium text-gray-900 dark:text-gray-300">First Name <span class="text-sm text-rose-500">*</span> </label>
          <div class="mt-1">
            <input type="text" id="first_name" name="first_name" placeholder="eg. Simon" [(ngModel)]="member.first_name" class="placeholder:text-sm dark:bg-gray-600 dark:placeholder:text-white/60 dark:text-white/80 appearance-none min-w-0 w-full bg-white border border-gray-300 rounded-md shadow-sm py-2 px-4 text-base text-gray-900 placeholder-gray-500 focus:outline-none focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500">
          </div>
        </div>
    
        <div class="col-span-1">
          <label for="last_name" class="block text-sm font-medium text-gray-900 dark:text-gray-300">Last Name <span class="text-sm text-rose-500">*</span>  </label>
          <div class="mt-1">
            <input id="last_name" type="text" name="last_name" placeholder="eg. Peter" [(ngModel)]="member.last_name" class="placeholder:text-sm dark:bg-gray-600 dark:placeholder:text-white/60 dark:text-white/80 appearance-none min-w-0 w-full bg-white border border-gray-300 rounded-md shadow-sm py-2 px-4 text-base text-gray-900 placeholder-gray-500 focus:outline-none focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500">
          </div>
        </div>
    
        <div class="col-span-1">
          <span for="gender" class="block text-sm font-medium text-gray-900 dark:text-gray-300">Gender <span class="text-sm text-rose-500">*</span> </span>
          <div class="mt-1">
            <ng-select appendTo="Body" id="gender" name="gender" [(ngModel)]="member.gender" [clearable]="false" placeholder="Select Gender">
              <ng-option *ngFor="let gen of jsonData.gender" [value]="gen.id">{{gen.name}}</ng-option>
            </ng-select>
          </div>
        </div>
    
        <div class="col-span-1">
          <label for="phone1" class="block text-sm font-medium text-gray-900 dark:text-gray-300">  Phone Number </label>
          <div class="mt-1">
            <input id="phone1" type="text" name="phone1" placeholder="eg. (+233)-234-56-788" [(ngModel)]="member.phone1" class="placeholder:text-sm dark:bg-gray-600 dark:placeholder:text-white/60 dark:text-white/80 appearance-none min-w-0 w-full bg-white border border-gray-300 rounded-md shadow-sm py-2 px-4 text-base text-gray-900 placeholder-gray-500 focus:outline-none focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500">
          </div>
        </div>
    
        <div class="col-span-1">
          <label for="resid_address" class="block text-sm font-medium text-gray-900 dark:text-gray-300">Residential Address </label>
          <div class="mt-1">
            <textarea rows="2" id="resid_address" type="text" name="resid_address" placeholder="eg. No. 1234, ABC Street / GPS" [(ngModel)]="member.resid_address" class="placeholder:text-sm dark:bg-gray-600 dark:placeholder:text-white/60 dark:text-white/80 appearance-none min-w-0 w-full bg-white border border-gray-300 rounded-md shadow-sm py-2 px-4 text-base text-gray-900 placeholder-gray-500 focus:outline-none focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500"></textarea>
          </div>
        </div>

        <div class="col-span-1 space-x-2 flex items-center justify-between">
          <div class="flex-shrink-0 inline-block rounded-full overflow-hidden h-24 w-24" aria-hidden="true">
            <img class="rounded-md h-full w-full" [src]="croppedImage" alt="">
          </div>
          <div class="rounded-md shadow-sm w-full">
            <div  (click)="openModal()" class="group relative border cursor-pointer border-gray-300 rounded-md p-3 flex items-center justify-center hover:bg-gray-50 focus-within:ring-2 focus-within:ring-offset-2 focus-within:ring-indigo-500">
              <label for="selected_image" class="relative text-sm leading-4 marker:font-medium text-gray-700 pointer-events-none">
                <span>{{ croppedImage === data.avatar ? 'Add' : 'Change' }} Photo</span>
              </label>
              <input id="selected_image" name="selected_image" type="file" (change)="fileChangeEvent($event)" accept="image/*" class="absolute w-full h-full opacity-0 cursor-pointer border-gray-300 rounded-md">
            </div>
          </div>
        </div>

        </div>

        <div class="col-span-1 lg:col-span-3 md:col-span-2 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 border-t border-indigo-200">

          <p class="flex col-span-1 md:col-span-2 lg:col-span-3 text-md leading-5 text-indigo-700 dark:text-indigo-400 my-3">Membership Information:</p>

          <div class="col-span-1">
            <label for="member_id" class="block text-sm font-medium text-gray-900 dark:text-gray-300">Member ID <span class="text-sm text-rose-500">*</span> <span class="text-gray-500 text-sm"> (Last ID - {{jsonData.last_member_id}}):</span> </label>
            <div class="mt-1">
              <input type="text" id="member_id" name="member_id" placeholder="Member ID" disabled [(ngModel)]="member.member_id" autocomplete="false" class="bg-indigo-50 placeholder:text-sm dark:bg-gray-600 dark:placeholder:text-white/60 dark:text-white/80 appearance-none min-w-0 w-full border border-gray-300 rounded-md shadow-sm py-2 px-4 text-base text-gray-900 placeholder-gray-500 focus:outline-none focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500">
            </div>
          </div>
      
          <div class="col-span-1">
            <span for="branch" class="block text-sm font-medium text-gray-900 dark:text-gray-300">Branch <span class="text-sm text-rose-500">*</span> </span>
            <div class="mt-1">
              <ng-select appendTo="Body" id="branch" name="branch" [(ngModel)]="member.branch" [clearable]="false" placeholder="Select Branch">
                <ng-option *ngFor="let branch of jsonData.branches" [value]="branch.id">{{branch.name}}</ng-option>
              </ng-select>
            </div>
          </div>
    
          <div class="col-span-1">
            <span  for="active_status" class="block text-sm font-medium text-gray-900 dark:text-gray-300">Membership Status <span class="text-sm text-rose-500">*</span></span>
          <div class="mt-1">
            <ng-select appendTo="Body" id="active_status"  name="active_status" [(ngModel)]="member.active_status" [clearable]="false" placeholder="Select Status">
              <ng-option *ngFor="let status of jsonData.active_statuses" [value]="status.id">{{status.name}}</ng-option>
            </ng-select>
          </div>
        </div>
    
        <div class="col-span-1">
          <span  for="invited_by" class="block text-sm font-medium text-gray-900 dark:text-gray-300">Invited By </span>
          <div class="mt-1">
            <ng-select appendTo="Body" id="invited_by" name="invited_by" [(ngModel)]="member.invited_by" placeholder="Search / Select Person">
              <ng-option *ngFor="let member of jsonData.members" [value]="member.id" class="flex items-center justify-start">
                <img class="rounded-sm h-8 w-8 inline-block mr-3" [src]="member.photo">
                <div class="inline-block text-lg">{{member.first_name}} {{member.other_names}} {{member.last_name}} ({{member.member_id}})</div>
              </ng-option>
            </ng-select>
          </div>
        </div>

        </div>
    
      </div>
      
      <div *ngIf="page === 2 && staff_checked" class="px-2 grid grid-cols-1 lg:grid-cols-3 gap-y-6 sm:gap-x-8 mb-4 dark:border-gray-500">

        <div class="px-2 grid grid-cols-1 md:grid-cols-2 col-span-1 lg:col-span-3 gap-6 sm:gap-x-8 mb-4 dark:border-gray-500">
          
          <p class="flex md:hidden text-md leading-5 text-indigo-700 dark:text-indigo-400 mt-6">Staff Admission Info:</p>

          <div class="flex items-center justify-between col-span-1 md:col-span-2 my-3">
            <p class="hidden md:flex text-md leading-5 text-indigo-700 dark:text-indigo-400 mt-6">Staff Admission Info:</p>
            <p class="flex leading-5 text-indigo-700 dark:text-indigo-400 items-center justify-end">
              <label for="is_staff_checked" class="flex font-bold text-indigo-700 px-1 pr-4 text-md lg:text-lg"><span class="text-rose-500">** </span>Member Is Church Staff?:</label>
              <input id="is_staff_checked" type="checkbox" name="is_staff_checked" [(ngModel)]="staff_checked" (ngModelChange)="changeUser();" class="flex w-5 h-5 text-indigo-700 accent-indigo-700 bg-gray-100 rounded border-gray-300 focus:ring-indigo-500 dark:focus:ring-indigo-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600">
            </p>
          </div>
          
          <div class="col-span-1">
            <label for="staff_id" class="block text-sm font-medium text-gray-900 dark:text-gray-300">Staff ID <span class="text-sm text-rose-500">* </span> <span class="text-gray-500 text-sm"> (Last ID - {{jsonData.last_staff_id}}):</span> </label>
            <div class="mt-1">
              <input type="text" id="staff_id" name="staff_id" placeholder="Staff ID" disabled [(ngModel)]="staff.staff_id" autocomplete="false" class="bg-indigo-50 placeholder:text-sm dark:bg-gray-600 dark:placeholder:text-white/60 dark:text-white/80 appearance-none min-w-0 w-full border border-gray-300 rounded-md shadow-sm py-2 px-4 text-base text-gray-900 placeholder-gray-500 focus:outline-none focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500">
            </div>
          </div>

          <div class="col-span-1">
            <label for="dept" class="block text-sm font-medium text-gray-900 dark:text-gray-300">Department(s)</label>
            <div class="mt-2">
              <ng-select appendTo="Body" id="dept" name="dept" [(ngModel)]="staff.dept" [multiple]="true" placeholder="Search / Select ">
                <ng-option *ngFor="let dept of jsonData.departments" [value]="dept.id">{{dept.name}}</ng-option>
              </ng-select>
            </div>
          </div>

          <div class="col-span-1">
            <label for="position" class="block text-sm font-medium text-gray-900 dark:text-gray-300">Position </label>
            <div class="mt-2">
              <ng-select appendTo="Body" id="position" name="position" [(ngModel)]="staff.position" [multiple]="true" placeholder="Search / Select ">
                <ng-option *ngFor="let position of jsonData.positions" [value]="position.id">{{position.name}}</ng-option>
              </ng-select>
            </div>
          </div>

          <div class="col-span-1">
            <label for="ministries_led" class="block text-sm font-medium text-gray-900 dark:text-gray-300">Make Group / Ministry Overseer? </label>
            <div class="mt-2">
              <ng-select appendTo="Body" id="ministries_led" name="ministries_led" [(ngModel)]="staff.ministries_led" [multiple]="true" placeholder="Search / Select ">
                <ng-option *ngFor="let ministry of jsonData.ministries" [value]="ministry.id">{{ministry.name}}</ng-option>
              </ng-select>
            </div>
          </div>

          <div class="col-span-1">
            <label for="branch_led" class="block text-sm font-medium text-gray-900 dark:text-gray-300">Make Branch Overseer? </label>
            <div class="mt-2">
              <ng-select appendTo="Body" id="branch_led" name="branch_led" [(ngModel)]="staff.branch_led" [multiple]="true" placeholder="Search / Select ">
                <ng-option *ngFor="let branch of jsonData.branches" [value]="branch.id">{{branch.name}}</ng-option>
              </ng-select>
            </div>
          </div>

        </div>


        <div class="grid md:grid-cols-2 lg:grid-cols-3 border-t border-indigo-50 col-span-1 md:col-span-2 lg:col-span-3">

          <p class="text-md leading-5 text-indigo-700 dark:text-indigo-400 md:col-span-2 lg:col-span-3 mt-6 mb-4 ml-6 flex">User Permissions: <span class="hidden lg:flex ml-4 col-span-1 text-sm text-rose-500"> (Select applicable permission(s) to user)</span></p>
            
          <div class="col-span-1 m-4" *ngFor="let permission of jsonData.permissions">
            <input type="checkbox" (change)="togglePermissions(permission.id)" [ngModel]="selectedPermissions.includes(permission.id)" class="mr-2 w-5 h-5 accent-indigo-700 text-indigo-700 rounded-lg border-gray-300 focus:ring-2xl-indigo-500 focus:ring-2">
            <span class="text-rose-500">* </span>{{permission.name}}
          </div>

        </div>

      </div>

      <!-- Action buttons -->
      <div class="pb-24 lg:pt-6 lg:px-6 col-span-3 gap-3 flex border-indigo-200 border-t py-4 justify-end">
        <button type="submit" (click)="reset()" class="hover:-translate-y-px hover:shadow-xs active:opacity-85 tracking-tight-rem transition-all ease-in-out w-full bg-gray-200 border border-transparent rounded-md shadow-md p-4 flex items-center justify-center text-base font-medium text-rose-500 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-rose-500 md:w-auto">
          Reset
        </button>
        <button *ngIf="staff_checked && page === 2" type="submit" (click)="move('previous')" class="hover:-translate-y-px hover:shadow-xs active:opacity-85 tracking-tight-rem transition-all ease-in-out w-full bg-gray-200 border border-transparent rounded-md shadow-md p-4 flex items-center justify-center text-base font-medium text-indigo-700 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 md:w-auto">
          Previous
        </button>
        <button *ngIf="staff_checked && page === 1" type="submit" (click)="move('next')" class="hover:-translate-y-px hover:shadow-xs active:opacity-85 tracking-tight-rem transition-all ease-in-out w-full bg-gray-200 border border-transparent rounded-md shadow-md px-8 py-4 flex items-center justify-center text-base font-medium text-indigo-700 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 md:w-auto">
          Next
        </button>
        <button *ngIf="page === 1 && !staff_checked || page === 2 && staff_checked || page === 3" type="submit" (click)="saveMember()" class="hover:-translate-y-px hover:shadow-xs active:opacity-85 tracking-tight-rem transition-all ease-in w-full bg-indigo-600 border border-transparent rounded-md shadow-sm px-8 p-4 flex items-center justify-center text-base font-medium text-white hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 md:w-auto">
          Save
        </button>
      </div>

    </div>
    
  </div>
</div>


<div *ngIf="modal" class="fixed z-50 inset-0 overflow-y-auto" aria-labelledby="modal-title" permission="dialog" aria-modal="true">
  <div class="flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0">
  
    <div class="fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity" aria-hidden="true"></div>
  
    <span class="hidden sm:inline-block sm:align-middle sm:h-screen" aria-hidden="true">&#8203;</span>
  
    <div class="relative inline-block align-middle  bg-white rounded-lg pt-5 px-8 pb-4 text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle w-screen lg:w-2/3 sm:p-6">
      
      <label class="hidden lg:inline-block  font-medium text-lg text-indigo-800 px-1 pb-6">Upload Image</label>

      <div class="grid grid-cols-1 gap-6 md:grid-cols-2 md:gap-x-12">
        <div class="md:col-span-1">
          <div class="rounded-md shadow-sm mx-6">
            <div class="group relative border cursor-pointer border-indigo-300 rounded-md p-3 flex items-center justify-center hover:bg-gray-50 focus-within:ring-2 focus-within:ring-offset-2">
              <label (click)="loadExistingImage()" for="selected_image" class="relative text-sm leading-4 marker:font-medium pointer-events-none">
                <span class="text-indigo-700">{{ croppedImage === data.avatar ? 'Add' : 'Change' }} Photo</span>
              </label>
              <input #fileInput id="selected_image" name="selected_image" type="file" (change)="fileChangeEvent($event)" accept="image/*" class="absolute w-full h-full opacity-0 cursor-pointer border-gray-300 rounded-md">
            </div>
          </div>
          <div class="pt-3">
            <image-cropper [imageChangedEvent]="imageChangedEvent" [maintainAspectRatio]="true" [aspectRatio]="4 / 4" format="png" (imageCropped)="imageCropped($event)" (imageLoaded)="imageLoaded($event)" (cropperReady)="cropperReady()" (loadImageFailed)="loadImageFailed()"></image-cropper>
          </div>
        </div>

        <label class="inline-block md:hidden font-medium text-lg text-indigo-800 px-1 pt-3">Image Preview</label>
      
        <div class="md:col-span-1">

          <div class="hidden lg:flex mx-6">
            <div class="p-3 flex items-center justify-center">
              <label for="selected_image" class="relative text-sm leading-4 marker:font-medium pointer-events-none">
                <span class="text-indigo-700 text-lg font-semibold">Image Preview</span>
              </label>
            </div>
          </div>
          
          <div class="lg:pt-3 w-full h-full flex justify-center items-center">
            <img [src]="croppedImage" class="max-w-full max-h-full"/>
          </div>
          
        </div>
      </div>
      
      <div class="mt-4 lg:mt-12 grid grid-cols-2 gap-3">
        <button type="button" (click)="cancelImg();" class="w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm p-4 bg-gray-200 text-base font-medium text-rose-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-rose-700 sm:mt-0 sm:text-sm">Cancel</button>
        <button (click)="saveImg()"  type="button" class="w-full inline-flex justify-center rounded-md border border-transparent shadow-sm p-4 bg-indigo-700 text-base font-medium text-white hover:bg-indigo-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-700 sm:text-sm">Save</button>
      </div>
      
    </div>
  </div>
</div>































